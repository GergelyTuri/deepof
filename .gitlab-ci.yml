stages:
  - test

include:
  - template: Code-Quality.gitlab-ci.yml

test:
  stage: test
  image: continuumio/anaconda3
  script:
    - pip install coverage
    - pip install -r ./deepof/requirements.txt
    - pip install -e deepof/
    - coverage run --source deepof -m pytest
    - coverage report -m --include deepof/utils.py,deepof/preprocess.py,deepof/model_utils.py,deepof/visuals.py,deepof/models.py
    - coverage xml -o deepof_cov.xml
  artifacts:
    reports:
      cobertura: deepof_cov.xml